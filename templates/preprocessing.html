{% extends 'base.html' %}

{% block title %}Preprocessing Guru{% endblock %}

{% block content %}
<div class="container mt-5">
     <div class="table-responsive-sm table-responsive-md">
          <h2 class="mb-3">Preprocessing</h2>

          <form class="d-flex row g-3" method="POST" action="/upload-preprocessing" enctype="multipart/form-data">
               <div class="col-md-6 col-lg-6">
                    <label for="file" class="form-label">Unggah file csv</label>
                    <input class="form-control" type="file" name="file" id="file" required>
                    <button class="btn btn-dark my-3" type="submit">upload</button>
               </div>
          </form>
          <!-- <p>Total Data: {{total_data}}</p> -->

          <table class="table table-bordered table-striped">
               <thead>
                    <tr>
                         <th>#</th>
                         <th>Username</th>
                         <th>Full Text</th>
                         <th>Created At</th>
                         <th>Tweet URL</th>
                    </tr>
               </thead>
               <tbody>
                    {% for row in data %}
                    <tr>
                         <td>{{ row.id }}</td>
                         <td>{{ row.username }}</td>
                         <td>{{ row.full_text }}</td>
                         <td>{{ row.created_at }}</td>
                         <td>{{ row.tweet_url }}</td>
                    </tr>
                    {% endfor %}
               </tbody>
          </table>

          <!-- Pagination -->
          {% if total_pages > 1 %}
          <nav aria-label="Page navigation example">
               <ul class="pagination justify-content-center">
                    <li class="page-item {% if current_page <= 1 %}disabled{% endif %}">
                         <a class="page-link"
                              href="{{ url_for('main.AllPreprocessing', page=current_page-1) }}">Previous</a>
                    </li>
                    {% for p in pagination_range %}
                    <li class="page-item {% if current_page == p %}active{% endif %}">
                         <a class="page-link" href="{{ url_for('main.AllPreprocessing', page=p) }}">{{ p }}</a>
                    </li>
                    {% endfor %}
                    <li class="page-item {% if current_page >= total_pages %}disabled{% endif %}">
                         <a class="page-link"
                              href="{{ url_for('main.AllPreprocessing', page=current_page+1) }}">Next</a>
                    </li>
               </ul>
          </nav>
          {% endif %}

     </div>
</div>
{% endblock %}