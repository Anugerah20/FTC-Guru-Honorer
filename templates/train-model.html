{% extends 'base.html' %}

{% block title %}Data Testing{% endblock %}

{% block content %}
<div class="container mt-5">
     <div class="table-responsive-sm table-responsive-md">
          <h1>Text Classification App</h1>

          <h2>Train Model</h2>
          <form id="trainForm" action="/training_model" method="POST">
               <button type="submit">Train Model</button>
          </form>

          <h2>Test Model</h2>
          <form id="testForm" action="/testing_model" method="POST">
               <button type="submit">Test Model</button>
          </form>

          <h2>Model Evaluation</h2>
          <div id="accuracy"></div>

          <script>
               document.getElementById('trainForm').addEventListener('submit', async (e) => {
                    e.preventDefault();
                    await fetch('/training_model', {
                         method: 'POST'
                    });
                    alert('Model trained successfully!');
               });

               document.getElementById('testForm').addEventListener('submit', async (e) => {
                    e.preventDefault();
                    const response = await fetch('/testing_model', {
                         method: 'POST'
                    });
                    const data = await response.json();
                    document.getElementById('accuracy').innerText = 'Model Accuracy: ' + data.accuracy.toFixed(2);
               });
          </script>
     </div>
     {% endblock %}